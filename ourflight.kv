#:import Factory kivy.factory.Factory

<BoxLayout>
    canvas.before:
        Color: 
            rgba: (0, 0.05, 0.1, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<HBoxLayout@BoxLayout>
    padding: 3

<VBoxLayout@BoxLayout>
    orientation: 'vertical'

<MyButton@Button>
    halign: 'center'
    valign: 'middle'
    color: (1, 0, 0, 1)
    background_color: (0, 0.05, 0.1, 1)
    background_normal: ''
    canvas.before:
        Color:
            rgba: (1, 0, 0, 1)
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height

<Label@Label>
    font_size: '14sp'
    text_size: self.size
    halign: 'center'
    valign: 'middle'
    markup: True
    multiline: False

<LLabel@Label>
    halign: 'left'

<RLabel@Label>
    halign: 'right' 

<Spinner@Spinner>
    halign: 'center'
    valign: 'middle'
    background_color: (0, 0.05, 0.1, 1)
    background_normal: ''
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1)
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
    option_cls: Factory.sp
    sync_height: True

<sp@SpinnerOption>
    color: 1, 1, 1, 1
    background_color: 0, 0.05, 0.1, 1

<TabbedPanelItem>
    background_color: (0.4, 0.55, 0.56, 1)
    background_normal: ''
    color: (1, 1, 1, 1)
    canvas.before:
        Color:
            rgba: (1, 0, 0, 1)
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height

<TextInput@TextInput>
    multiline: 'False'
    halign: 'center'
    valign: 'middle'
    size_hint_x: (0.5)
    background_color: (0, 0.05, 0.1, 1)
    background_normal: ''
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1)
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height


<Container>
    alf: alf  # угол стартового объекта относительно Солнца
    bet1: bet1  # угол объекта назначения относительно Солнца в момент старта ракеты
    rad01: rad01  # большая полуось стартового объекта
    rad02: rad02  # большая полуось объекта назначения
    t00: t00  # период обращения объекта назначения вокруг Солнца
    spn_p00: spn_p00  # выбор размерности периода обращения
    t02: t02  # время движения объекта до встречи с ракетой, оно же время движения ракеты
    spn_p02: spn_p02  # выбор размерности времени движения ракеты
    lbl_l1: lbl_l1  # надпись Длина пути ракеты
    lbl_v1: lbl_v1  # надпись Скорость ракеты
    lbl_bet2: lbl_bet2  # надпись Угол встречи ракеты и объекта

    con_h: con_h  # высота обтекателя ракеты
    con_w: con_w  # ширина обтекателя ракеты
    h3: h3  # высота 3 ступени
    h2: h2  # высота 2 ступени
    h1: h1  # высота 1 ступени
    side_h: side_h  # высота боковых ускорителей
    side_w: side_w  # ширина боковых ускорителей
    n_dus: n_dus  # число сопел

    rad: rad  # большая полуось объекта
    period0: period0  # период обращения объекта
    period0_time: period0_time  # выбор размерности периода обращения объекта
    lbl_orb: lbl_orb  # надпись Длина орбиты
    lbl_v0: lbl_v0  # надпись Скорость обращения объекта в км/с
    v3_sec: v3_sec  # скорость обращения объекта в км/с (пользовательская)
    spn_v3: spn_v3  # выбор размерности скорости обращения объекта
    lbl_v3: lbl_v3  # надпись Скорость обращения объекта (км/ч, км/сут, км/год)
    ae0: ae0  # количество астрономических единиц
    lbl_ae: lbl_ae  # надпись Перевод а.е. в км
    cat1: cat1  # катет 1
    cat2: cat2  # катет 2
    lbl_gipot: lbl_gipot  # надпись Гипотенуза

    spn_start: spn_start  # стартовый объект
    lbl_start: lbl_start  # надпись Стартовый объект
    spn_destination: spn_destination  # объект назначения
    lbl_destination: lbl_destination  # надпись Объект назначения
    spn_side: spn_side  # стороны относительно Солнца
    lbl_side: lbl_side  # надпись Стороны относительно Солнца
    spn_tariff: spn_tariff  # выбор тарифа
    lbl_tariff: lbl_tariff  # надпись Выбор тарифа
    spn_passengers: spn_passengers  # кол-во пассажиров
    lbl_passengers: lbl_passengers  # надпись Кол-во пассажиров
    spn_cargo: spn_cargo  # кол-во груза
    lbl_cargo: lbl_cargo  # надпись Кол-во груза
    lbl_price: lbl_price  # надпись Стоимость

    
    halign: 'center'
    valign: 'middle'
    padding: 10
    canvas.before:
        Color: 
            rgba: (1, 1, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    do_default_tab: False

    TabbedPanelItem:
        text: 'Траектория'
        VBoxLayout:
            
            VBoxLayout:
                HBoxLayout:
                    Label:
                        text: '[b]Рассчёт траектории полёта[/b]'
                HBoxLayout:
                    RLabel: 
                        text: 'Угол старта, градусы'
                    TextInput:
                        id: alf
                HBoxLayout:
                    RLabel: 
                        text: 'Угол объекта, градусы'
                    TextInput:
                        id: bet1
                HBoxLayout:
                    RLabel: 
                        text: 'Радиус старта, млн.км'
                    TextInput:
                        id: rad01
                HBoxLayout:
                    RLabel: 
                        text: 'Радиус объекта, млн.км'
                    TextInput:
                        id: rad02
                HBoxLayout:
                    RLabel: 
                        text: 'Период обращения'
                    TextInput:
                        id: t00
                    Spinner:
                        text: 'размерность'
                        id: spn_p00
                        values: 'сут', 'год'
                HBoxLayout:
                    RLabel: 
                        text: 'Рассчётное время'
                    TextInput:
                        id: t02
                    Spinner:
                        text: 'размерность'
                        id: spn_p02
                        values: 'сут', 'год'
                
            VBoxLayout:
                MyButton:
                    text: '[b]ТРАЕКТОРИЯ[/b]'
                    on_release: root.pathed()
                Label:
                    text: 'Длина пути ракеты...'
                    id: lbl_l1
                Label:
                    text: 'Рекомендуемая скорость ракеты...'
                    id: lbl_v1
                Label:
                    text: 'Направление ракеты...'
                    id: lbl_bet2
                    
                    
    TabbedPanelItem:
        text: 'Навигация'
        VBoxLayout:
            
            VBoxLayout:
                HBoxLayout:
                    Label:
                        text: '[b]Чертёж траектории полёта[/b]'
                HBoxLayout:
                    size_hint_y: 3
                    canvas:
                        Color:
                            rgba: (0.31, 0.35, 0.35, 1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                HBoxLayout:
                    MyButton:
                        text: '[b]ЧЕРТЁЖ[/b]'
                        on_release: root.draw_path()
                HBoxLayout:
                    MyButton:
                        text: '[b]ОЧИСТКА[/b]'
                        on_release: root.clear_path()
                    

    TabbedPanelItem:
        text: 'Ракета'
        VBoxLayout:
            HBoxLayout:
                VBoxLayout:
                    HBoxLayout:
                        LLabel:
                            text: 'Выс.конуса'
                        TextInput:
                            id: con_h
                    HBoxLayout:
                        LLabel:
                            text: 'Шир.конуса'
                        TextInput:
                            id: con_w
                    HBoxLayout:
                        LLabel:
                            text: 'Выс. 3 ступени'
                        TextInput:
                            id: h3
                    HBoxLayout:
                        LLabel:
                            text: 'Выс. 2 ступени'
                        TextInput:
                            id: h2
                    HBoxLayout:
                        LLabel:
                            text: 'Выс. 1 ступени'
                        TextInput:
                            id: h1
                    HBoxLayout:
                        LLabel:
                            text: 'Выс.бок.ускорителей'
                        TextInput:
                            id: side_h
                    HBoxLayout:
                        LLabel:
                            text: 'Шир.бок.ускорителей'
                        TextInput:
                            id: side_w
                    HBoxLayout:
                        LLabel:
                            text: 'Кол-во сопел'
                        Spinner:
                            id: n_dus
                            text: 'Кол-во'
                            values: (str(n) for n in range(1, 7))
                    HBoxLayout:
                        MyButton:
                            text: '[b]ЧЕРТЁЖ[/b]'
                            on_release: root.draw_rocket()
                    HBoxLayout:
                        MyButton:
                            text: '[b]ОЧИСТКА[/b]'
                            on_release: root.clear_rocket()
                VBoxLayout:
                    canvas:
                        Color:
                            rgba: (0.31, 0.35, 0.35, 1)
                        Rectangle:
                            pos: self.pos
                            size: self.size    


    TabbedPanelItem:
        text: 'Формулы' 
        VBoxLayout:
            HBoxLayout:
                Label:
                    text: '[b]Формулы для рассчёта траектории[/b]'

            HBoxLayout:
                RLabel:
                    text: 'Радиус, млн км    .'
                TextInput:
                    id: rad
            HBoxLayout:
                RLabel:
                    text: 'Период   .'
                TextInput:
                    id: period0
                Spinner:
                    id: period0_time
                    text: 'Размерность'
                    values: ('час', 'сут', 'год')
            HBoxLayout:
                MyButton:
                    text: '[b]ДЛИНА ОКРУЖНОСТИ[/b]'
                    on_release: root.circum()
                LLabel:
                    id: lbl_orb
                    text: ' Длина окружности...'
            HBoxLayout:
                MyButton:
                    text: '[b]СКОРОСТЬ[/b]'
                    on_release: root.vel0()
                LLabel:
                    id: lbl_v0
                    text: ' Скорость...'
            HBoxLayout:
                Label:
                    text: '____________________________________'

            HBoxLayout:
                RLabel:
                    text: 'Скорость, км/сек '
                TextInput:
                    id: v3_sec
                Spinner:
                    id: spn_v3
                    text: 'Размерность скорости'
                    values: 'км/час', 'км/сут', 'км/год'
            HBoxLayout:
                MyButton:
                    text: '[b]ПЕРЕВОД[/b]'
                    on_release: root.vel3()
                LLabel:
                    id: lbl_v3
                    text: ' В других единицах...'
            HBoxLayout:
                Label:
                    text: '____________________________________'

            HBoxLayout:
                TextInput:
                    id: ae0
                LLabel:
                    text: ' а.е.'
            HBoxLayout:
                MyButton:
                    text: '[b]КИЛОМЕТРЫ[/b]'
                    on_release: root.ae()
                LLabel:
                    id: lbl_ae
                    text: ' В млн км это...'
            HBoxLayout:
                Label:
                    text: '____________________________________'

            HBoxLayout:
                RLabel: 
                    text: 'Катет 1  .'
                TextInput:
                    id: cat1
            HBoxLayout:
                RLabel: 
                    text: 'Катет 2  .'
                TextInput:
                    id: cat2
            HBoxLayout:
                MyButton:
                    text: '[b]ГИПОТЕНУЗА[/b]'
                    on_release: root.pifagor()
                LLabel:
                    id: lbl_gipot
                    text: ' Гипотенуза...'


    TabbedPanelItem:
        text: 'Стоимость'
        VBoxLayout:
            HBoxLayout:
                Label:
                    text: '[b]Рассчёт стоимости полёта[/b]'

            HBoxLayout:
                Spinner:
                    id: spn_start
                    text: 'Откуда\nлетим?' 
                    values: 'Земля', 'Луна', 'Меркурий', 'Венера', 'Марс', 'Церера', 'Веста', 'Ио', 'Европа','Ганимед', 'Каллисто', 'Титан', 'Титания', 'Тритон', 'Плутон', 'Эрида'
                    on_text: root.on_start_select()
                LLabel:
                    id: lbl_start
                    text: 'Отправление с...'
            
            HBoxLayout:
                Spinner:
                    id: spn_destination
                    text: 'Куда\nлетим?' 
                    values: 'Земля', 'Луна', 'Меркурий', 'Венера', 'Марс', 'Церера', 'Веста', 'Ио', 'Европа','Ганимед', 'Каллисто', 'Титан', 'Титания', 'Тритон', 'Плутон', 'Эрида'
                    on_text: root.on_destination_select()
                LLabel:
                    id: lbl_destination
                    text: 'Цель назначения...'

            HBoxLayout:
                Spinner:
                    id: spn_side
                    text: 'Стороны\nот центра' 
                    values: 'одна', 'разные'
                    on_text: root.on_side_select()
                LLabel:
                    id: lbl_side
                    text: 'Стороны от центра...'

            HBoxLayout:
                Spinner:
                    id: spn_tariff
                    text: 'Выберите\nтариф' 
                    values: 'простой', 'быстрый', 'супербыстрый'
                    on_text: root.on_tariff_select()
                LLabel:
                    id: lbl_tariff
                    text: 'Тариф...'

            HBoxLayout:
                Spinner:
                    id: spn_passengers
                    text: 'Количество\nпассажиров' 
                    values: (str(n) for n in range(1, 21))
                    on_text: root.on_passengers_select()
                LLabel:
                    id: lbl_passengers
                    text: '... пассажиров'

            HBoxLayout:
                Spinner:
                    id: spn_cargo
                    text: 'Количество\nтонн груза' 
                    values: (str(n) for n in range(1, 101))
                    on_text: root.on_cargo_select()
                LLabel:
                    id: lbl_cargo
                    text: '... тонн груза'

            HBoxLayout:
                MyButton:
                    text: '[b]СТОИМОСТЬ[/b]'
                    on_release: root.priced()
            HBoxLayout:
                Label:
                    id: lbl_price
                    text: 'Стоимость полёта:'


    TabbedPanelItem:
        text: 'Изобретатели' 
        VBoxLayout:
            HBoxLayout:
                Label:
                    text: '[b]Изобретатели[/b]'

            HBoxLayout:
                Image:
                    source: 'images/rocket2.jpg'
            HBoxLayout:
                Label:
                    text: 'Максим Чернов\nпрограммное обеспечение'
            HBoxLayout:
                Label:
                    text: '____________________________________'
            HBoxLayout:
                Label:
                    text: 'Вячеслав Чернов\nмонтаж оборудования'
            HBoxLayout:
                Label:
                    text: '____________________________________'
            HBoxLayout:
                Label:
                    text: 'Дормидонт Пищалкин\nэкономические рассчёты'
            