#:import Factory kivy.factory.Factory


<Accordion>
    orientation: 'vertical'

<AccBoxLayout@BoxLayout>
    orientation: 'vertical'
    padding: 20
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1)
        Line:
            width: 5
            rectangle: self.x, self.y, self.width, self.height

<HBoxLayout@BoxLayout>
    padding: 3

<VBoxLayout@BoxLayout>
    orientation: 'vertical'

<MyButton@Button>
    halign: 'center'
    valign: 'middle'
    color: (1, 0, 0, 1)
    background_color: (0, 0.05, 0.1, 1)
    background_normal: ''
    canvas.before:
        Color:
            rgba: (1, 0, 0, 1)
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height

<Label@Label>
    font_size: '14sp'
    text_size: self.size
    halign: 'center'
    valign: 'middle'
    markup: True
    multiline: False

<LLabel@Label>
    halign: 'left'

<RLabel@Label>
    halign: 'right' 

<Spinner@Spinner>
    halign: 'center'
    valign: 'middle'
    background_color: (0, 0.05, 0.1, 1)
    background_normal: ''
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1)
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
    option_cls: Factory.sp
    sync_height: True

<sp@SpinnerOption>
    color: 1, 1, 1, 1
    background_color: 0, 0.05, 0.1, 1

<TextInput@TextInput>
    multiline: 'False'
    halign: 'center'
    valign: 'middle'
    size_hint_x: (0.5)
    background_color: (0, 0.05, 0.1, 1)
    background_normal: ''
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1)
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height


<Container>
    alf: alf
    bet1: bet1
    rad01: rad01
    rad02: rad02
    t00: t00
    spn_p00: spn_p00
    t02: t02
    spn_p02: spn_p02
    lbl_l1: lbl_l1
    lbl_v1: lbl_v1
    lbl_bet2: lbl_bet2

    con_h: con_h
    con_w: con_w
    h3: h3
    h2: h2
    h1: h1
    side_h: side_h
    side_w: side_w
    n_dus: n_dus

    destination: destination
    destination_select: destination_select
    tariff: tariff
    tariff_select: tariff_select
    passengers: passengers
    passengers_select: passengers_select
    cargo: cargo
    cargo_select: cargo_select
    btn_price: btn_price
    price_select: price_select

    rad0: rad0
    period0: period0
    period0_time: period0_time
    lbl_v0: lbl_v0
    v3_sec: v3_sec
    spn_v3: spn_v3
    lbl_v3: lbl_v3
    ae0: ae0
    lbl_ae: lbl_ae
    cat1: cat1
    cat2: cat2
    lbl_gipot: lbl_gipot

    r1: r1
    r2: r2
    v1_sec: v1_sec
    v2_sec: v2_sec
    lbl_orb2: lbl_orb2
    spn_t: spn_t
    lbl_t1: lbl_t1
    lbl_l2: lbl_l2
    lbl_l2_cent: lbl_l2_cent

    
    halign: 'center'
    valign: 'middle'
    padding: 10
    canvas.before:
        Color: 
            rgba: (0, 0.05, 0.1, 1)
        Rectangle:
            pos: self.pos
            size: self.size

    VBoxLayout:
        padding: 0
        size: root.width, root.height
        Accordion:

            AccordionItem: 
                title: '[b]Траектория[/b]'
                AccBoxLayout:
                    
                    VBoxLayout:
                        HBoxLayout:
                            Label:
                                text: '[b]Рассчёт траектории полёта[/b]'
                        HBoxLayout:
                            RLabel: 
                                text: 'Угол старта, градусы'
                            TextInput:
                                id: alf
                        HBoxLayout:
                            RLabel: 
                                text: 'Угол объекта, градусы'
                            TextInput:
                                id: bet1
                        HBoxLayout:
                            RLabel: 
                                text: 'Радиус старта, млн.км'
                            TextInput:
                                id: rad01
                        HBoxLayout:
                            RLabel: 
                                text: 'Радиус объекта, млн.км'
                            TextInput:
                                id: rad02
                        HBoxLayout:
                            RLabel: 
                                text: 'Период обращения'
                            TextInput:
                                id: t00
                            Spinner:
                                text: 'размерность'
                                id: spn_p00
                                values: 'сут', 'год'
                        HBoxLayout:
                            RLabel: 
                                text: 'Рассчётное время'
                            TextInput:
                                id: t02
                            Spinner:
                                text: 'размерность'
                                id: spn_p02
                                values: 'сут', 'год'
                    VBoxLayout:
                        MyButton:
                            text: 'Траектория'
                            on_release: root.pathed()
                        Label:
                            text: 'Длина пути ракеты...'
                            id: lbl_l1
                        Label:
                            text: 'Рекомендуемая скорость ракеты...'
                            id: lbl_v1
                        Label:
                            text: 'Направление ракеты...'
                            id: lbl_bet2
                    
                    

            AccordionItem: 
                title: '[b]Ракета[/b]'
                AccBoxLayout:
                    BoxLayout:
                        VBoxLayout:
                            BoxLayout:
                                LLabel:
                                    text: 'Выс.конуса'
                                TextInput:
                                    id: con_h
                            BoxLayout:
                                LLabel:
                                    text: 'Шир.конуса'
                                TextInput:
                                    id: con_w
                            BoxLayout:
                                LLabel:
                                    text: 'Выс. 3 ступени'
                                TextInput:
                                    id: h3
                            BoxLayout:
                                LLabel:
                                    text: 'Выс. 2 ступени'
                                TextInput:
                                    id: h2
                            BoxLayout:
                                LLabel:
                                    text: 'Выс. 1 ступени'
                                TextInput:
                                    id: h1
                            BoxLayout:
                                LLabel:
                                    text: 'Выс.бок.ускорителей'
                                TextInput:
                                    id: side_h
                            BoxLayout:
                                LLabel:
                                    text: 'Шир.бок.ускорителей'
                                TextInput:
                                    id: side_w
                            BoxLayout:
                                LLabel:
                                    text: 'Кол-во сопел'
                                Spinner:
                                    id: n_dus
                                    text: 'Кол-во'
                                    values: (str(n) for n in range(1, 7))
                            BoxLayout:
                                MyButton:
                                    text: 'Чертим ракету'
                                    on_release: root.draw_rocket()
                            BoxLayout:
                                MyButton:
                                    text: 'Очистить'
                                    on_release: root.clear_rocket()
                        VBoxLayout:
                            canvas:
                                Color:
                                    rgba: (0.31, 0.35, 0.35, 1)
                                Rectangle:
                                    pos: self.pos
                                    size: self.size      

                        
            AccordionItem: 
                title: '[b]Стоимость[/b]'
                AccBoxLayout:
                    HBoxLayout:
                        Label:
                            text: '[b]Рассчёт стоимости полёта[/b]'

                    HBoxLayout:
                        Spinner:
                            id: destination
                            text: 'Куда\nлетим?' 
                            values: 'Луна', 'Меркурий', 'Венера', 'Марс', 'Церера', 'Веста', 'Ганимед', 'Ио', 'Европа', 'Каллисто', 'Титан', 'Титания', 'Тритон', 'Плутон', 'Эрида'
                            on_text: root.on_destination_select()
                        Label:
                            id: destination_select
                            text: 'Цель назначения...'

                    HBoxLayout:
                        Spinner:
                            id: tariff
                            text: 'Выберите\nтариф' 
                            values: 'простой', 'быстрый', 'супербыстрый'
                            on_text: root.on_tariff_select()
                        Label:
                            id: tariff_select
                            text: 'Тариф...'

                    HBoxLayout:
                        Spinner:
                            id: passengers
                            text: 'Количество\nпассажиров' 
                            values: (str(n) for n in range(1, 21))
                            on_text: root.on_passengers_select()
                        Label:
                            id: passengers_select
                            text: '... пассажиров'

                    HBoxLayout:
                        Spinner:
                            id: cargo
                            text: 'Количество\nтонн груза' 
                            values: (str(n) for n in range(1, 101))
                            on_text: root.on_cargo_select()
                        Label:
                            id: cargo_select
                            text: '... тонн груза'

                    HBoxLayout:
                        MyButton:
                            id: btn_price
                            text: '[b]СТОИМОСТЬ[/b]'
                            on_release: root.priced()
                    HBoxLayout:
                        Label:
                            id: price_select
                            text: 'Стоимость полёта:'


            AccordionItem: 
                title: '[b]Формулы[/b]'
                AccBoxLayout:
                    BoxLayout:
                        Label:
                            text: '[b]Формулы для рассчёта траектории[/b]'
                    
                    HBoxLayout:
                        RLabel:
                            text: 'Радиус   .'
                        TextInput:
                            id: rad0
                        LLabel:
                            text: ' млн км'
                    HBoxLayout:
                        RLabel:
                            text: 'Период   .'
                        TextInput:
                            id: period0
                        Spinner:
                            id: period0_time
                            text: 'Размерность'
                            values: ('час', 'сут', 'год')
                    HBoxLayout:
                        MyButton:
                            text: '[b]Скорость[/b]'
                            on_release: root.vel0()
                        LLabel:
                            id: lbl_v0
                            text: ' Скорость...'
                    HBoxLayout:
                        Label:
                            text: '____________________________________'

                    HBoxLayout:
                        RLabel:
                            text: 'Скорость, км/сек '
                        TextInput:
                            id: v3_sec
                        Spinner:
                            id: spn_v3
                            text: 'Размерность скорости'
                            values: 'км/час', 'км/сут', 'км/год'
                    HBoxLayout:
                        MyButton:
                            text: '[b]Перевод[/b]'
                            on_release: root.vel3()
                        LLabel:
                            id: lbl_v3
                            text: ' В других единицах...'
                    HBoxLayout:
                        Label:
                            text: '____________________________________'

                    HBoxLayout:
                        TextInput:
                            id: ae0
                        LLabel:
                            text: ' а.е.'
                    HBoxLayout:
                        MyButton:
                            text: '[b]В км[/b]'
                            on_release: root.ae()
                        LLabel:
                            id: lbl_ae
                            text: ' В млн км это...'
                    HBoxLayout:
                        Label:
                            text: '____________________________________'

                    HBoxLayout:
                        RLabel: 
                            text: 'Катет 1  .'
                        TextInput:
                            id: cat1
                    HBoxLayout:
                        RLabel: 
                            text: 'Катет 2  .'
                        TextInput:
                            id: cat2
                    HBoxLayout:
                        MyButton:
                            text: '[b]Гипотенуза[/b]'
                            on_release: root.pifagor()
                        LLabel:
                            id: lbl_gipot
                            text: ' Гипотенуза...'


            AccordionItem: 
                title: '[b]Параметры[/b]'
                AccBoxLayout:                    
                    Label:
                        text: '[b]Рассчёт параметров полёта[/b]'

                    HBoxLayout:
                        RLabel:
                            text: 'Полуось орб.старта, млн км    .'
                        TextInput:
                            id: r1

                    HBoxLayout:
                        RLabel:
                            text: 'Полуось орб.финиша, млн км    .'
                        TextInput:
                            id: r2

                    HBoxLayout:
                        RLabel:
                            text: 'Скорость ракеты км/сек   .'
                        TextInput:
                            id: v1_sec
                            
                    HBoxLayout:
                        RLabel:
                            text: 'Скорость объекта, км/сек .'
                        TextInput:
                            id: v2_sec

                    HBoxLayout:
                        RLabel:
                            text: 'Размерность времени .'
                        Spinner:
                            id: spn_t
                            text: 'Размерность времени'
                            values: 'час', 'сутки', 'год'

                    HBoxLayout:
                        MyButton:
                            text: '[b]ВЫЧИСЛИТЬ[/b]'
                            on_release: root.calculate()  

                    LLabel:
                        id: lbl_orb2
                        text: 'Длина орбиты объекта ... млн км.'
                    LLabel:
                        id: lbl_t1
                        text: 'Время движения ракеты до объекта...'
                    LLabel:
                        id: lbl_l2
                        text: 'За это время объект прошёл...'
                    LLabel:
                        id: lbl_l2_cent
                        text: 'Это составляет ...% от его орбиты.'
